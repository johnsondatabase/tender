
export const translations = {
    vi: {
        // Login Screen
        login_title: "Đăng nhập",
        login_welcome: "Chào mừng bạn quay trở lại!",
        label_username: "Tên đăng nhập",
        label_password: "Mật khẩu",
        placeholder_username: "Nhập email hoặc username",
        placeholder_password: "Mật khẩu của bạn",
        label_remember: "Ghi nhớ đăng nhập",
        btn_login: "Đăng nhập",
        text_no_account: "Chưa có tài khoản?",
        link_register: "Đăng ký ngay",
        register_title: "Tạo tài khoản",
        register_subtitle: "Nhập thông tin của bạn để đăng ký",
        label_role: "Vai trò",
        label_fullname: "Họ và Tên",
        label_confirm_password: "Xác nhận mật khẩu",
        btn_register: "Đăng ký tài khoản",
        text_have_account: "Đã có tài khoản?",
        link_login: "Đăng nhập",
        app_subtitle: "Quản lý Kho & Đơn hàng",
        app_desc_title: "Hệ thống quản trị tập trung",
        app_desc_text: "Tối ưu hóa quy trình vận hành, kiểm soát tồn kho và xử lý đơn hàng hiệu quả.",
        
        // Navigation (Sidebar/Bottom)
        nav_dashboard: "Tổng quan",
        nav_listing: "Danh sách",
        nav_detail: "Chi tiết",
        nav_product: "Sản phẩm",
        nav_setting: "Cài đặt",
        nav_online: "TRỰC TUYẾN",
        nav_logout: "Đăng xuất",

        // View Headers
        header_dashboard: "Bảng điều khiển",
        header_listing: "Danh sách thầu",
        header_detail: "Chi tiết",
        header_product: "Quản lý sản phẩm",
        header_setting: "Cài đặt",
        
        // Settings Menu
        settings_profile: "Hồ sơ Cá Nhân",
        settings_admin: "Quản Lý Người Dùng",
        settings_system: "Hệ Thống & Giao Diện",
        settings_about: "Giới Thiệu",
        settings_support: "Hỗ Trợ",
        
        // System Settings
        sys_dark_mode: "Chế độ tối",
        sys_dark_desc: "Giao diện nền tối bảo vệ mắt",
        sys_language: "Ngôn ngữ",
        sys_lang_desc: "Chọn ngôn ngữ hiển thị",
        sys_font_size: "Cỡ chữ",
        sys_font_desc: "Điều chỉnh kích thước văn bản",
        sys_theme: "Màu chủ đạo",
        sys_theme_desc: "Chọn màu sắc thương hiệu",
        
        // User Management (Admin)
        usr_list_title: "Danh sách tài khoản",
        usr_status_approved: "Đã Duyệt",
        usr_status_pending: "Chờ Duyệt",
        usr_status_locked: "Khóa",
        btn_unlock: "Mở Khóa",
        btn_approve: "Duyệt",
        btn_lock: "Khóa",
        btn_delete_acc: "Xóa Tài Khoản",
        btn_reset_pass: "Đặt lại MK",
        btn_data_config: "Cấu hình Data",
        msg_no_users: "Không có người dùng nào.",

        // Profile
        pro_title: "Hồ sơ của tôi",
        pro_desc: "Quản lý thông tin hồ sơ để bảo mật tài khoản",
        label_old_pass: "Mật khẩu cũ",
        label_new_pass: "Mật khẩu mới",
        label_confirm_password: "Xác nhận MK",
        btn_save: "Lưu Thay Đổi",
        btn_upload: "Chọn Ảnh",
        btn_remove_img: "Xóa ảnh",
        tip_img_format: "Dụng lượng tối đa 1 MB. Định dạng: .JPEG, .PNG",
        msg_update_profile_success: "Cập nhật thông tin thành công!",

        // Common Buttons & Labels
        status_online: "Đang hoạt động",
        loading: "Đang tải...",
        processing: "Đang xử lý...",
        confirm_title: "Xác nhận",
        confirm_msg: "Bạn có chắc muốn thực hiện hành động này?",
        btn_cancel: "Hủy",
        btn_confirm: "Đồng ý",
        btn_add_new: "Thêm Mới",
        btn_apply: "Áp dụng",
        btn_filter: "Lọc",
        search_placeholder: "Tìm kiếm...",
        txt_no_data: "Chưa có dữ liệu",
        txt_manual_copy: "Đã sao chép thủ công",
        msg_copy_success: "Đã sao chép",
        
        // Common Date Filters
        lbl_time: "Thời gian:",
        lbl_custom_opt: "Tùy chọn:",
        
        // Dashboard
        dash_total_listings: "Tổng Hồ Sơ",
        dash_total_quota: "Tổng Quota",
        dash_total_win: "Giá Trị Thắng",
        dash_win_rate: "Tỷ Lệ Thắng",
        dash_chart_status: "Tỷ Trọng Trạng Thái",
        dash_chart_monthly: "Xu Hướng Hồ Sơ Mới",
        dash_distributor_analysis: "Nhà Phân Phối",
        dash_psr_analysis: "Phân Tích Hiệu Quả PSR",
        dash_psr_performance: "Hiệu suất PSR (Quota vs Win)",
        dash_psr_table_title: "Chi tiết theo PSR",
        dash_monitor_contract: "Theo dõi hợp đồng",
        dash_expiring_soon: "Sắp hết hạn",
        dash_expired: "Đã hết hạn",
        dash_region_analysis: "Theo Địa bàn",
        
        // Dashboard Mobile KPI
        mob_kpi_listings: "Hồ sơ",
        mob_kpi_quota: "Quota",
        mob_kpi_win: "Thắng",
        mob_kpi_rate: "Tỷ lệ",

        // Product View
        prod_select: "Chọn",
        prod_image: "Hình ảnh",
        prod_ma_vt: "Mã SP",
        prod_ten_vt: "Tên SP",
        prod_listing: "Listing", 
        prod_waiting: "Waiting",
        prod_win: "Win",
        prod_fail: "Fail",
        prod_ch1: "Cấu hình 1",
        prod_ch2: "Cấu hình 2",
        prod_nganh: "Ngành",
        prod_group: "Nhóm SP",
        btn_delete_selected: "Xóa chọn",
        btn_download_template: "Tải Mẫu",
        btn_import: "Import Excel",
        btn_manual_add: "Thủ Công",
        modal_img_manager: "Quản lý hình ảnh",
        modal_img_add: "Thêm ảnh",
        modal_img_download_all: "Tải xuống tất cả",
        modal_img_tip: "Mẹo: Bạn có thể dán ảnh trực tiếp (Ctrl+V) vào cửa sổ này. Kéo thả để sắp xếp.",
        modal_img_empty: "Chưa có hình ảnh. Dán (Ctrl+V) hoặc chọn ảnh để thêm.",
        
        // Listing / Kanban
        col_listing: "Listing (Mới)",
        col_waiting: "Waiting (Chờ)",
        col_win: "Win (Thắng thầu)",
        col_fail: "Fail (Trượt thầu)",
        lbl_days_left: "ngày còn lại",
        lbl_expired: "Hết hạn",
        lbl_contract_duration: "Thời hạn hợp đồng",
        msg_update_success: "Cập nhật thành công",
        msg_delete_success: "Xóa thành công",
        modal_add_title: "Thêm Mới Thầu",
        modal_edit_title: "Cập Nhật Thầu",

        // Listing Fields
        lbl_code: "Mã",
        lbl_year: "Năm",
        lbl_hospital: "Bệnh viện",
        lbl_department: "Khoa",
        lbl_province: "Tỉnh",
        lbl_area: "Khu vực",
        lbl_distributor: "Nhà Phân Phối",
        lbl_date_created: "Ngày tạo",
        lbl_type: "Loại",
        lbl_sector: "Ngành",
        lbl_psr: "PSR",
        lbl_manager: "Quản lý",
        lbl_signed_date: "Ngày ký",
        lbl_end_date: "Ngày KT",
        lbl_expiration: "Ngày hết hạn",
        lbl_attach: "Đính kèm tệp",
        lbl_material_list: "Danh sách vật tư",

        // Detail View
        dt_ma_thau: "Mã Thầu",
        dt_nam: "Năm",
        dt_benh_vien: "Bệnh Viện",
        dt_department: "Khoa",
        dt_tinh: "Tỉnh",
        dt_khu_vuc: "Khu Vực",
        dt_npp: "Nhà Phân Phối",
        dt_ngay: "Ngày",
        dt_loai: "Loại",
        dt_ma_vt: "Mã SP",
        dt_quota: "Quota",
        dt_tinh_trang: "Tình Trạng",
        dt_sl_trung: "SL Trúng",
        dt_ngay_ky: "Ngày Ký",
        dt_ngay_kt: "Ngày Kết Thúc",
        dt_nganh: "Ngành",
        dt_psr: "PSR",
        dt_quan_ly: "Quản Lý",
        dt_group_product: "Nhóm SP",
        
        // Stats
        dt_stat_listing: "Listing",
        dt_stat_quota: "Quota",
        dt_stat_waiting: "Waiting",
        dt_stat_win: "Win",
        dt_stat_fail: "Fail",
        dt_stat_partial: "Thua 1 Phần",
        stat_count: "Đếm",
        stat_sum: "Tổng",
        stat_min: "Min",
        stat_max: "Max",
        txt_rows: "Dòng:",
        
        // Filter & Sort
        lbl_date_filter_title: "Bộ lọc ngày",
        lbl_custom_range_opt: "Tùy chọn khoảng thời gian:",
        ctx_advanced_date_filter: "Bộ lọc ngày nâng cao",
        btn_col_manager: "Cột",
        col_manager_title: "Quản lý cột",
        col_manager_tip: "Kéo thả để sắp xếp. Ghim để đưa lên đầu.",
        search_all_cols: "Tìm kiếm...",
        
        // Export
        btn_export: "Excel",
        btn_export_filtered: "Xuất theo bộ lọc",
        btn_export_all: "Xuất tất cả",

        // Filter Options
        lbl_filter_title: "Bộ Lọc Tìm Kiếm",
        btn_hide_filter: "Ẩn lọc",
        btn_show_filter: "Bộ lọc",
        btn_clear_filter: "Xóa lọc",
        opt_all: "Tất cả",
        opt_selected: "Đã chọn",
        opt_today: "Hôm nay",
        opt_week: "Tuần này",
        opt_month: "Tháng này",
        opt_quarter: "Quý này",
        opt_year: "Năm nay",
        opt_custom_range: "Tùy chọn",
        
        // Expiration Presets
        opt_exp_7: "7 ngày tới",
        opt_exp_15: "15 ngày tới",
        opt_exp_30: "30 ngày tới",
        opt_exp_45: "45 ngày tới",
        opt_exp_90: "90 ngày tới",
        opt_exp_120: "120 ngày tới",

        // Notification
        notif_hello: "Xin chào",
        notif_guest: "Khách",
        notif_today: "Hôm nay",
        
        // Days of week
        day_sun: "Chủ Nhật",
        day_mon: "Thứ Hai",
        day_tue: "Thứ Ba",
        day_wed: "Thứ Tư",
        day_thu: "Thứ Năm",
        day_fri: "Thứ Sáu",
        day_sat: "Thứ Bảy"
    },
    en: {
        // Login Screen
        login_title: "Sign In",
        login_welcome: "Welcome back!",
        label_username: "Username / Email",
        label_password: "Password",
        placeholder_username: "Enter email or username",
        placeholder_password: "Your password",
        label_remember: "Remember me",
        btn_login: "Sign In",
        text_no_account: "Don't have an account?",
        link_register: "Register now",
        register_title: "Create Account",
        register_subtitle: "Enter your details to register",
        label_role: "Role",
        label_fullname: "Full Name",
        label_confirm_password: "Confirm Password",
        btn_register: "Sign Up",
        text_have_account: "Already have an account?",
        link_login: "Sign In",
        app_subtitle: "Inventory & Order Management",
        app_desc_title: "Centralized Management System",
        app_desc_text: "Optimize operations, control inventory, and process orders efficiently.",

        // Navigation (Sidebar/Bottom)
        nav_dashboard: "Dashboard",
        nav_listing: "Listing",
        nav_detail: "Detail",
        nav_product: "Product",
        nav_setting: "Setting",
        nav_online: "ONLINE",
        nav_logout: "Logout",

        // View Headers
        header_dashboard: "Dashboard",
        header_listing: "Listing",
        header_detail: "Detail",
        header_product: "Products",
        header_setting: "Settings",

        // Settings Menu
        settings_profile: "My Profile",
        settings_admin: "User Management",
        settings_system: "System & UI",
        settings_about: "About",
        settings_support: "Support",

        // System Settings
        sys_dark_mode: "Dark Mode",
        sys_dark_desc: "Dark background to protect eyes",
        sys_language: "Language",
        sys_lang_desc: "Select display language",
        sys_font_size: "Font Size",
        sys_font_desc: "Adjust text size",
        sys_theme: "Theme Color",
        sys_theme_desc: "Choose brand color",
        
        // User Management
        usr_list_title: "User List",
        usr_status_approved: "Approved",
        usr_status_pending: "Pending",
        usr_status_locked: "Locked",
        btn_unlock: "Unlock",
        btn_approve: "Approve",
        btn_lock: "Lock",
        btn_delete_acc: "Delete Account",
        btn_reset_pass: "Reset Password",
        btn_data_config: "Data Config",
        msg_no_users: "No users found.",

        // Profile
        pro_title: "My Profile",
        pro_desc: "Manage profile information for account security",
        label_old_pass: "Old Password",
        label_new_pass: "New Password",
        label_confirm_password: "Confirm Password",
        btn_save: "Save Changes",
        btn_upload: "Upload Photo",
        btn_remove_img: "Remove Photo",
        tip_img_format: "Max size 1 MB. Format: .JPEG, .PNG",
        msg_update_profile_success: "Profile updated successfully!",

        // Common
        status_online: "Online",
        loading: "Loading...",
        processing: "Processing...",
        confirm_title: "Confirm",
        confirm_msg: "Are you sure you want to proceed?",
        btn_cancel: "Cancel",
        btn_confirm: "Confirm",
        btn_add_new: "Add New",
        btn_apply: "Apply",
        btn_filter: "Filter",
        search_placeholder: "Search...",
        txt_no_data: "No data available",
        txt_manual_copy: "Copied manually",
        msg_copy_success: "Copied to clipboard",
        
        // Common Date Filters
        lbl_time: "Period:",
        lbl_custom_opt: "Custom:",

        // Dashboard
        dash_total_listings: "Total Listings",
        dash_total_quota: "Total Quota",
        dash_total_win: "Won Value",
        dash_win_rate: "Win Rate",
        dash_chart_status: "Status Distribution",
        dash_chart_monthly: "New Listings Trend",
        dash_distributor_analysis: "Distributors",
        dash_psr_analysis: "PSR Performance Analysis",
        dash_psr_performance: "PSR Performance (Quota vs Win)",
        dash_psr_table_title: "Details by PSR",
        dash_monitor_contract: "Contract Monitor",
        dash_expiring_soon: "Expiring Soon",
        dash_expired: "Expired",
        dash_region_analysis: "By Region",
        
        // Dashboard Mobile KPI
        mob_kpi_listings: "Listing",
        mob_kpi_quota: "Quota",
        mob_kpi_win: "Won",
        mob_kpi_rate: "Rate",

        // Product View
        prod_select: "Select",
        prod_image: "Image",
        prod_ma_vt: "Code",
        prod_ten_vt: "Name",
        prod_listing: "Listing", 
        prod_waiting: "Waiting",
        prod_win: "Win",
        prod_fail: "Fail",
        prod_ch1: "Config 1",
        prod_ch2: "Config 2",
        prod_nganh: "Sector",
        prod_group: "Group",
        btn_delete_selected: "Delete Selected",
        btn_download_template: "Template",
        btn_import: "Import Excel",
        btn_manual_add: "Manual",
        modal_img_manager: "Image Management",
        modal_img_add: "Add Image",
        modal_img_download_all: "Download All",
        modal_img_tip: "Tip: You can paste images (Ctrl+V) directly here. Drag to reorder.",
        modal_img_empty: "No images yet. Paste (Ctrl+V) or select images to add.",

        // Listing / Kanban
        col_listing: "Listing",
        col_waiting: "Waiting",
        col_win: "Win",
        col_fail: "Fail",
        lbl_days_left: "days left",
        lbl_expired: "Expired",
        lbl_contract_duration: "Contract Duration",
        msg_update_success: "Update successful",
        msg_delete_success: "Deleted successfully",
        modal_add_title: "Add New Listing",
        modal_edit_title: "Edit Listing",

        // Listing Fields Labels
        lbl_code: "Code",
        lbl_year: "Year",
        lbl_hospital: "Hospital",
        lbl_department: "Dept",
        lbl_province: "Province",
        lbl_area: "Region", 
        lbl_distributor: "Distributor",
        lbl_date_created: "Created",
        lbl_type: "Type",
        lbl_sector: "Sector",
        lbl_psr: "PSR",
        lbl_manager: "Manager",
        lbl_signed_date: "Signed",
        lbl_end_date: "End Date",
        lbl_expiration: "Expiration",
        lbl_attach: "Attachments",
        lbl_material_list: "Material List",

        // Detail View Columns
        dt_ma_thau: "Code",
        dt_nam: "Year",
        dt_benh_vien: "Hospital",
        dt_department: "Dept",
        dt_tinh: "Province",
        dt_khu_vuc: "Region",
        dt_npp: "Distributor",
        dt_ngay: "Date",
        dt_loai: "Type",
        dt_ma_vt: "Prod Code",
        dt_quota: "Quota",
        dt_tinh_trang: "Status",
        dt_sl_trung: "Won Qty",
        dt_ngay_ky: "Signed",
        dt_ngay_kt: "End Date",
        dt_nganh: "Sector",
        dt_psr: "PSR",
        dt_quan_ly: "Manager",
        dt_group_product: "Group",
        
        // Stats
        dt_stat_listing: "Listing",
        dt_stat_quota: "Quota",
        dt_stat_waiting: "Waiting",
        dt_stat_win: "Win",
        dt_stat_fail: "Fail",
        dt_stat_partial: "Partial Loss",
        stat_count: "Count",
        stat_sum: "Sum",
        stat_min: "Min",
        stat_max: "Max",
        txt_rows: "Rows:",

        // Filter & Sort
        lbl_date_filter_title: "Date Filter",
        lbl_custom_range_opt: "Custom Range:",
        ctx_advanced_date_filter: "Advanced Date Filter",
        btn_col_manager: "Columns",
        col_manager_title: "Column Manager",
        col_manager_tip: "Drag to reorder. Pin to stick to left.",
        search_all_cols: "Search...",
        
        // Export
        btn_export: "Excel",
        btn_export_filtered: "Export Filtered",
        btn_export_all: "Export All",

        // Filter Options
        lbl_filter_title: "Search Filter",
        btn_hide_filter: "Hide",
        btn_show_filter: "Filter",
        btn_clear_filter: "Clear",
        opt_all: "All",
        opt_selected: "Selected",
        opt_today: "Today",
        opt_week: "This Week",
        opt_month: "This Month",
        opt_quarter: "This Quarter",
        opt_year: "This Year",
        opt_custom_range: "Custom",

        // Expiration Presets
        opt_exp_7: "Next 7 days",
        opt_exp_15: "Next 15 days",
        opt_exp_30: "Next 30 days",
        opt_exp_45: "Next 45 days",
        opt_exp_90: "Next 90 days",
        opt_exp_120: "Next 120 days",

        // Notification
        notif_hello: "Hello",
        notif_guest: "Guest",
        notif_today: "Today",
        
        // Days of week
        day_sun: "Sunday",
        day_mon: "Monday",
        day_tue: "Tuesday",
        day_wed: "Wednesday",
        day_thu: "Thursday",
        day_fri: "Friday",
        day_sat: "Saturday"
    }
};

export function setLanguage(lang) {
    if (!translations[lang]) lang = 'vi'; // Default fallback
    localStorage.setItem('appLanguage', lang);
    
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang][key]) {
            if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                el.placeholder = translations[lang][key];
            } else {
                // If element has icon (svg), we want to update ONLY the text node, 
                // but usually simpler to wrap text in span. 
                // If innerHTML is just text, replace it. 
                // If it has children, look for a span or text node? 
                // Current approach in app: most elements are simple.
                // For complex buttons (Icon + Text), we wrap text in span with data-i18n.
                el.textContent = translations[lang][key];
            }
        }
    });

    // Update specific UI state for language switchers
    updateFlagActiveState(lang);
    
    // Dispatch event for other components to listen (like Handsontable)
    window.dispatchEvent(new CustomEvent('languageChanged', { detail: { lang } }));
}

export function getCurrentLanguage() {
    return localStorage.getItem('appLanguage') || 'vi';
}

function updateFlagActiveState(lang) {
    document.querySelectorAll('.lang-flag').forEach(btn => {
        if (btn.dataset.lang === lang) {
            btn.classList.add('ring-2', 'ring-offset-2', 'ring-primary', 'scale-110');
            btn.classList.remove('opacity-50', 'grayscale');
        } else {
            btn.classList.remove('ring-2', 'ring-offset-2', 'ring-primary', 'scale-110');
            btn.classList.add('opacity-50', 'grayscale');
        }
    });
}
