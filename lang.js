


export const translations = {
    vi: {
        // Login Screen
        login_title: "Đăng nhập",
        login_welcome: "Chào mừng bạn quay trở lại!",
        label_username: "Tên đăng nhập",
        label_password: "Mật khẩu",
        placeholder_username: "Nhập email hoặc username",
        placeholder_password: "Mật khẩu của bạn",
        label_remember: "Ghi nhớ đăng nhập",
        btn_login: "Đăng nhập",
        text_no_account: "Chưa có tài khoản?",
        link_register: "Đăng ký ngay",
        register_title: "Tạo tài khoản",
        register_subtitle: "Nhập thông tin của bạn để đăng ký",
        label_role: "Vai trò",
        label_fullname: "Họ và Tên",
        label_confirm_password: "Xác nhận mật khẩu",
        btn_register: "Đăng ký tài khoản",
        text_have_account: "Đã có tài khoản?",
        link_login: "Đăng nhập",
        app_subtitle: "Quản lý Kho & Đơn hàng",
        app_desc_title: "Hệ thống quản trị tập trung",
        app_desc_text: "Tối ưu hóa quy trình vận hành, kiểm soát tồn kho và xử lý đơn hàng hiệu quả.",
        
        // Navigation (Sidebar/Bottom)
        nav_dashboard: "Tổng quan",
        nav_listing: "Danh sách",
        nav_detail: "Chi tiết",
        nav_product: "Sản phẩm",
        nav_setting: "Cài đặt",
        nav_online: "TRỰC TUYẾN",
        nav_logout: "Đăng xuất",

        // View Headers
        header_dashboard: "Bảng điều khiển",
        header_listing: "Danh sách thầu",
        header_detail: "Chi tiết",
        header_product: "Quản lý sản phẩm",
        header_setting: "Cài đặt",
        
        // Settings Menu
        settings_profile: "Hồ sơ Cá Nhân",
        settings_admin: "Quản Lý Người Dùng",
        settings_system: "Hệ Thống & Ngôn Ngữ",
        settings_about: "Giới Thiệu",
        settings_support: "Hỗ Trợ",
        
        // System Settings
        sys_dark_mode: "Chế độ tối",
        sys_dark_desc: "Giao diện nền tối bảo vệ mắt",
        sys_language: "Ngôn ngữ",
        sys_lang_desc: "Chọn ngôn ngữ hiển thị",
        sys_font_size: "Cỡ chữ",
        sys_font_desc: "Điều chỉnh kích thước văn bản",
        sys_theme: "Màu chủ đạo",
        sys_theme_desc: "Chọn màu sắc thương hiệu",

        // Profile
        pro_title: "Hồ sơ của tôi",
        pro_desc: "Quản lý thông tin hồ sơ để bảo mật tài khoản",
        label_old_pass: "Mật khẩu cũ",
        label_new_pass: "Mật khẩu mới",
        btn_save: "Thay Đổi Thông Tin",
        btn_upload: "Chọn Ảnh",

        // Common
        status_online: "Đang hoạt động",
        loading: "Đang tải...",
        processing: "Đang xử lý...",
        confirm_title: "Xác nhận",
        confirm_msg: "Bạn có chắc muốn thực hiện hành động này?",
        btn_cancel: "Hủy",
        btn_confirm: "Đồng ý",
        btn_add_new: "Thêm Mới",
        btn_apply: "Áp dụng",
        search_placeholder: "Tìm theo Mã thầu, Bệnh viện...",

        // Permissions
        btn_permission: "Phân quyền",
        perm_title: "Phân quyền người dùng",
        perm_view: "Xem",
        perm_add: "Thêm",
        perm_edit: "Sửa",
        perm_delete: "Xóa",
        perm_import: "Nhập file",
        perm_export: "Xuất file",
        perm_screen: "Màn hình",
        perm_desc: "Cấp quyền chi tiết cho từng chức năng",

        // Listing / Kanban
        col_waiting: "Waiting (Chờ)",
        col_win: "Win (Thắng thầu)",
        col_fail: "Fail (Trượt thầu)",
        lbl_days_left: "ngày còn lại",
        lbl_expired: "Hết hạn",
        lbl_contract_duration: "Thời hạn hợp đồng",
        msg_update_success: "Cập nhật thành công",
        msg_delete_success: "Xóa thành công",
        modal_add_title: "Thêm Mới Thầu",
        modal_edit_title: "Cập Nhật Thầu",

        // Listing Fields Labels
        lbl_code: "Mã",
        lbl_year: "Năm",
        lbl_hospital: "Bệnh viện",
        lbl_province: "Tỉnh",
        lbl_area: "Khu vực",
        lbl_distributor: "NPP",
        lbl_date_created: "Ngày tạo",
        lbl_type: "Loại",
        lbl_sector: "Ngành",
        lbl_psr: "PSR",
        lbl_manager: "Quản lý",
        lbl_signed_date: "Ngày ký",
        lbl_end_date: "Ngày KT",

        // Detail View Columns (New)
        dt_stt: "STT",
        dt_ma_thau: "Tender Code",
        dt_nam: "Năm",
        dt_benh_vien: "Bệnh Viện",
        dt_tinh: "Tỉnh",
        dt_khu_vuc: "Khu Vực",
        dt_npp: "Nhà Phân Phối",
        dt_ngay: "Ngày",
        dt_loai: "Loại",
        dt_ma_vt: "Mã SP",
        dt_quota: "Quota",
        dt_tinh_trang: "Tình Trạng",
        dt_sl_trung: "SL Trúng",
        dt_ngay_ky: "Ngày Ký",
        dt_ngay_kt: "Ngày Kết Thúc",
        dt_nganh: "Ngành",
        dt_psr: "PSR",
        dt_quan_ly: "Quản Lý",
        dt_group_product: "Nhóm SP",
        
        // Detail View Footer & Stats
        dt_stat_quota: "Quota",
        dt_stat_waiting: "Waiting",
        dt_stat_win: "Win (Trúng)",
        dt_stat_fail: "Fail",
        dt_stat_partial: "Thua 1 Phần",
        stat_count: "Đếm",
        stat_sum: "Tổng",
        stat_min: "Min",
        stat_max: "Max",
        txt_rows: "dòng",
        txt_of: "trên",
        txt_page: "Trang",

        // Detail Date Filter
        lbl_date_filter_title: "Bộ lọc ngày",
        lbl_custom_range_opt: "Tùy chọn khoảng thời gian:",
        ctx_advanced_date_filter: "Bộ lọc ngày nâng cao",

        // Product View Columns
        prod_select: "Chọn",
        prod_image: "Hình ảnh",
        prod_ma_vt: "Mã SP",
        prod_ten_vt: "Tên SP",
        prod_waiting: "Waiting",
        prod_win: "Win",
        prod_fail: "Fail",
        prod_ch1: "Cấu hình 1",
        prod_ch2: "Cấu hình 2",
        prod_nganh: "Ngành",
        prod_group: "Nhóm SP",
        btn_delete_selected: "Xóa chọn",
        btn_download_template: "Tải Mẫu",
        btn_import: "Nhập Excel",
        
        // Detail View Toolbar
        btn_align_left: "Trái",
        btn_align_center: "Giữa",
        btn_align_right: "Phải",
        btn_wrap: "Xuống dòng",
        lbl_pagination: "Trang",
        btn_col_manager: "Cột",
        col_manager_title: "Quản lý hiển thị cột",
        search_all_cols: "Tìm kiếm tất cả cột...",
        
        // Formatting
        fmt_bold: "In đậm",
        fmt_italic: "In nghiêng",
        fmt_text_color: "Màu chữ",
        fmt_bg_color: "Màu nền",
        
        // Export
        btn_export: "Excel",
        btn_export_filtered: "Xuất theo bộ lọc",
        btn_export_all: "Xuất tất cả",

        // Filter Options
        lbl_filter_title: "Bộ Lọc Tìm Kiếm",
        btn_hide_filter: "Ẩn lọc",
        btn_show_filter: "Bộ lọc",
        btn_clear_filter: "Xóa lọc",
        opt_all: "Tất cả",
        opt_selected: "Đã chọn",
        opt_today: "Hôm nay",
        opt_week: "Tuần này",
        opt_month: "Tháng này",
        opt_quarter: "Quý này",
        opt_year: "Năm nay",

        // Messages
        confirm_view_product: "Bạn muốn xem sản phẩm này?",
        confirm_view_tender_detail: "Bạn muốn xem chi tiết tender của sản phẩm này?",

        // Dashboard
        dash_total_listings: "Tổng Hồ Sơ",
        dash_total_quota: "Tổng Quota",
        dash_total_win: "Giá Trị Thắng",
        dash_win_rate: "Tỷ Lệ Thắng",
        dash_chart_status: "Tỷ Trọng Trạng Thái",
        dash_chart_hospital: "Top 5 Bệnh Viện (Quota)",
        dash_chart_monthly: "Xu Hướng Hồ Sơ Mới",
        dash_chart_product_group: "Nhóm Sản Phẩm (Win)",
        dash_subtitle_overview: "Thống kê tổng quan hoạt động kinh doanh",
        dash_psr_analysis: "Phân Tích Hiệu Quả PSR",
        dash_psr_performance: "Hiệu suất PSR (Quota vs Win)",
        dash_psr_table_title: "Chi tiết theo PSR",
        dash_top_10_products: "Top 10 Sản Phẩm (Quota & Win Rate)",
        dash_filter_product: "Lọc theo Sản phẩm:",
        dash_filter_date: "Thời gian:",
        col_psr: "PSR",
        col_top_product: "Sản phẩm chủ lực",
        
        // Dashboard New Widgets
        dash_expiring_title: "Sắp hết hạn (30 ngày)",
        dt_days_left: "ngày",
        dt_ngay_kt: "Ngày KT"
    },
    en: {
        // Login Screen
        login_title: "Sign In",
        login_welcome: "Welcome back!",
        label_username: "Username / Email",
        label_password: "Password",
        placeholder_username: "Enter email or username",
        placeholder_password: "Your password",
        label_remember: "Remember me",
        btn_login: "Sign In",
        text_no_account: "Don't have an account?",
        link_register: "Register now",
        register_title: "Create Account",
        register_subtitle: "Enter your details to register",
        label_role: "Role",
        label_fullname: "Full Name",
        label_confirm_password: "Confirm Password",
        btn_register: "Sign Up",
        text_have_account: "Already have an account?",
        link_login: "Sign In",
        app_subtitle: "Inventory & Order Management",
        app_desc_title: "Centralized Management System",
        app_desc_text: "Optimize operations, control inventory, and process orders efficiently.",

        // Navigation (Sidebar/Bottom)
        nav_dashboard: "Dashboard",
        nav_listing: "Listing",
        nav_detail: "Detail",
        nav_product: "Product",
        nav_setting: "Setting",
        nav_online: "ONLINE",
        nav_logout: "Logout",

        // View Headers
        header_dashboard: "Dashboard",
        header_listing: "Listing",
        header_detail: "Detail",
        header_product: "Product",
        header_setting: "Settings",

        // Settings Menu
        settings_profile: "My Profile",
        settings_admin: "User Management",
        settings_system: "System & Language",
        settings_about: "About",
        settings_support: "Support",

        // System Settings
        sys_dark_mode: "Dark Mode",
        sys_dark_desc: "Dark background to protect eyes",
        sys_language: "Language",
        sys_lang_desc: "Select display language",
        sys_font_size: "Font Size",
        sys_font_desc: "Adjust text size",
        sys_theme: "Theme Color",
        sys_theme_desc: "Choose brand color",

        // Profile
        pro_title: "My Profile",
        pro_desc: "Manage profile information for account security",
        label_old_pass: "Old Password",
        label_new_pass: "New Password",
        btn_save: "Changes profile",
        btn_upload: "Upload Photo",

        // Common
        status_online: "Online",
        loading: "Loading...",
        processing: "Processing...",
        confirm_title: "Confirm",
        confirm_msg: "Are you sure you want to proceed?",
        btn_cancel: "Cancel",
        btn_confirm: "Confirm",
        btn_add_new: "Add New",
        btn_apply: "Apply",
        search_placeholder: "Search by Code, Hospital...",

        // Permissions
        btn_permission: "Permissions",
        perm_title: "User Permissions",
        perm_view: "View",
        perm_add: "Add",
        perm_edit: "Edit",
        perm_delete: "Delete",
        perm_import: "Import",
        perm_export: "Export",
        perm_screen: "Screen",
        perm_desc: "Grant detailed permissions for each feature",

        // Listing / Kanban
        col_waiting: "Waiting",
        col_win: "Win",
        col_fail: "Fail",
        lbl_days_left: "days left",
        lbl_expired: "Expired",
        lbl_contract_duration: "Contract Duration",
        msg_update_success: "Update successful",
        msg_delete_success: "Deleted successfully",
        modal_add_title: "Add New Listing",
        modal_edit_title: "Edit Listing",

        // Listing Fields Labels
        lbl_code: "Code",
        lbl_year: "Year",
        lbl_hospital: "Hospital",
        lbl_province: "Province",
        lbl_area: "Regional", 
        lbl_distributor: "Distributor",
        lbl_date_created: "Created",
        lbl_type: "Type",
        lbl_sector: "Sector",
        lbl_psr: "PSR",
        lbl_manager: "Manager",
        lbl_signed_date: "Signed",
        lbl_end_date: "End Date",

        // Detail View Columns (New)
        dt_stt: "No.",
        dt_ma_thau: "Tender Code",
        dt_nam: "Year",
        dt_benh_vien: "Hospital",
        dt_tinh: "Province",
        dt_khu_vuc: "Region",
        dt_npp: "Distributor",
        dt_ngay: "Date",
        dt_loai: "Type",
        dt_ma_vt: "Product Code",
        dt_quota: "Quota",
        dt_tinh_trang: "Status",
        dt_sl_trung: "Won Qty",
        dt_ngay_ky: "Signed",
        dt_ngay_kt: "End Date",
        dt_nganh: "Sector",
        dt_psr: "PSR",
        dt_quan_ly: "Manager",
        dt_group_product: "Product Group",
        
        // Detail View Footer & Stats
        dt_stat_quota: "Quota",
        dt_stat_waiting: "Waiting",
        dt_stat_win: "Win",
        dt_stat_fail: "Fail",
        dt_stat_partial: "Partial Loss",
        stat_count: "Count",
        stat_sum: "Sum",
        stat_min: "Min",
        stat_max: "Max",
        txt_rows: "rows",
        txt_of: "of",
        txt_page: "Page",

        // Detail Date Filter
        lbl_date_filter_title: "Date Filter",
        lbl_custom_range_opt: "Custom Range:",
        ctx_advanced_date_filter: "Advanced Date Filter",
        
        // Product View Columns
        prod_select: "Select",
        prod_image: "Image",
        prod_ma_vt: "Product Code",
        prod_ten_vt: "Product Name",
        prod_waiting: "Waiting",
        prod_win: "Win",
        prod_fail: "Fail",
        prod_ch1: "Config 1",
        prod_ch2: "Config 2",
        prod_nganh: "Sector",
        prod_group: "Product Group",
        btn_delete_selected: "Delete Selected",
        btn_download_template: "Template",
        btn_import: "Import Excel",
        
        // Detail View Toolbar
        btn_align_left: "Left",
        btn_align_center: "Center",
        btn_align_right: "Right",
        btn_wrap: "Wrap Text",
        lbl_pagination: "Page",
        btn_col_manager: "Columns",
        col_manager_title: "Column Manager",
        search_all_cols: "Search all columns...",
        
        // Formatting
        fmt_bold: "Bold",
        fmt_italic: "Italic",
        fmt_text_color: "Text Color",
        fmt_bg_color: "Background Color",
        
        // Export
        btn_export: "Excel",
        btn_export_filtered: "Export Filtered",
        btn_export_all: "Export All",

        // Filter Options
        lbl_filter_title: "Search Filter",
        btn_hide_filter: "Hide Filter",
        btn_show_filter: "Filter",
        btn_clear_filter: "Clear Filter",
        opt_all: "All",
        opt_selected: "Selected",
        opt_today: "Today",
        opt_week: "This Week",
        opt_month: "This Month",
        opt_quarter: "This Quarter",
        opt_year: "This Year",

        // Messages
        confirm_view_product: "Do you want to view this product?",
        confirm_view_tender_detail: "Do you want to see tender details for this product?",

        // Dashboard
        dash_total_listings: "Total Listings",
        dash_total_quota: "Total Quota",
        dash_total_win: "Won Value",
        dash_win_rate: "Win Rate",
        dash_chart_status: "Status Distribution",
        dash_chart_hospital: "Top 5 Hospitals (Quota)",
        dash_chart_monthly: "New Listing Trends",
        dash_chart_product_group: "Product Groups (Win)",
        dash_subtitle_overview: "Business performance overview",
        dash_psr_analysis: "PSR Analysis",
        dash_psr_performance: "PSR Performance (Quota vs Win)",
        dash_psr_table_title: "Details by PSR",
        dash_top_10_products: "Top 10 Products (Quota & Win Rate)",
        dash_filter_product: "Filter by Product:",
        dash_filter_date: "Time Range:",
        col_psr: "PSR",
        col_top_product: "Top Product",

        // Dashboard New Widgets
        dash_expiring_title: "Expiring Soon (30 days)",
        dt_days_left: "days",
        dt_ngay_kt: "End Date"
    }
};

export function setLanguage(lang) {
    if (!translations[lang]) lang = 'vi'; // Default fallback
    localStorage.setItem('appLanguage', lang);
    
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang][key]) {
            if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                el.placeholder = translations[lang][key];
            } else {
                // Handle mixed content (icon + text) carefully if needed, 
                // but for now assuming text-only containers or spans
                // Ideally wrap text in span with data-i18n
                el.textContent = translations[lang][key];
            }
        }
    });

    // Update specific UI state for language switchers
    updateFlagActiveState(lang);
    
    // Dispatch event for other components to listen (like Handsontable)
    window.dispatchEvent(new CustomEvent('languageChanged', { detail: { lang } }));
}

export function getCurrentLanguage() {
    return localStorage.getItem('appLanguage') || 'vi';
}

function updateFlagActiveState(lang) {
    // Logic to highlight selected flag
    document.querySelectorAll('.lang-flag').forEach(btn => {
        if (btn.dataset.lang === lang) {
            btn.classList.add('ring-2', 'ring-offset-2', 'ring-primary', 'scale-110');
            btn.classList.remove('opacity-50', 'grayscale');
        } else {
            btn.classList.remove('ring-2', 'ring-offset-2', 'ring-primary', 'scale-110');
            btn.classList.add('opacity-50', 'grayscale');
        }
    });
}
